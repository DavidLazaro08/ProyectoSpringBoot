# üìù Resumen de Ajustes Aplicados - SEMANA 1

## ‚úÖ Cambios Completados

Se han aplicado **4 ajustes puntuales** al proyecto Spring Boot sin a√±adir funcionalidad nueva ni adelantar semanas posteriores.

---

## üìÇ Archivos Modificados

### 1Ô∏è‚É£ **Blindaje del Dashboard**

#### [RegistroService.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java)
- **Cambio:** M√©todo [getDashboard()](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java#54-82) ahora maneja facturas opcionales sin lanzar excepciones
- **Detalle:** Usa `.orElse(null)` en lugar de `.orElseThrow()` para facturas
- **Resultado:** Si no hay factura, muestra valores `null` que se renderizan como "‚Äî" en la vista

#### [dashboard.html](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/resources/templates/dashboard.html)
- **Cambio:** A√±adida validaci√≥n `!= null` para `importeFactura`
- **Detalle:** Muestra "‚Äî" si el importe es nulo

---

### 2Ô∏è‚É£ **Sustituci√≥n Double ‚Üí BigDecimal**

#### [Plan.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Plan.java)
- **Cambio:** Campo `precioMensual` de `Double` a `BigDecimal`

#### [Factura.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Factura.java)
- **Cambio:** Campo `importe` de `Double` a `BigDecimal`

#### [Pago.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Pago.java)
- **Cambio:** Campo `importe` de `Double` a `BigDecimal`

#### [PagoTarjeta.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/PagoTarjeta.java)
- **Cambio:** Constructor actualizado para aceptar `BigDecimal`

#### [PagoPaypal.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/PagoPaypal.java)
- **Cambio:** Constructor actualizado para aceptar `BigDecimal`

#### [PagoTransferencia.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/PagoTransferencia.java)
- **Cambio:** Constructor actualizado para aceptar `BigDecimal`

#### [RegistroService.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java)
- **Cambio:** [DashboardDTO](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java#83-119) ahora usa `BigDecimal` para `importeFactura`

#### [DataInitializer.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/config/DataInitializer.java)
- **Cambio:** Uso de `BigDecimal.valueOf(9.99)` en lugar de literales `double`

---

### 3Ô∏è‚É£ **Comentarios Naturales**

#### [Usuario.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Usuario.java)
- **Eliminado:** "// Relaci√≥n 1‚Äì1 con Perfil (lado inverso)"
- **Eliminado:** "// Constructor requerido por JPA"
- **Eliminado:** "// Getters"

#### [Perfil.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Perfil.java)
- **Eliminado:** "// Campos b√°sicos (m√≠nimos y defendibles)"
- **Eliminado:** "// 1 Usuario -> 1 Perfil"
- **Eliminado:** "// El FK lo guardamos aqu√≠: perfiles.usuario_id (√∫nico)"
- **Eliminado:** "// JPA"

#### [Suscripcion.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Suscripcion.java)
- **Eliminado:** "// Un usuario -> una suscripci√≥n (simplificaci√≥n defendible para el proyecto)"
- **Eliminado:** "// Plan es "cat√°logo", no hace falta auditarlo para el hist√≥rico de suscripciones"
- **Eliminado:** "// Requerido por JPA"

#### [EstadoSuscripcion.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/enums/EstadoSuscripcion.java)
- **Eliminado:** Comentario JavaDoc completo sobre estados y ciclo de vida

#### [RegistroService.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java)
- **Eliminado:** "// 1) Usuario", "// 2) Perfil (1-1)", "// 3) Suscripci√≥n", "// 4) Factura autom√°tica (m√≠nima)"
- **Eliminado:** "// Getters "cl√°sicos" para que Thymeleaf los coja sin pelearse con records"

---

### 4Ô∏è‚É£ **DataInitializer para Pruebas**

#### [DataInitializer.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/config/DataInitializer.java)
- **A√±adido:** Comentario JavaDoc claro: `/** Inicializaci√≥n de datos de prueba para desarrollo. Este componente NO debe usarse en producci√≥n. */`
- **Simplificado:** Comentarios internos ("Planes de cat√°logo", "Usuario de prueba", etc.)
- **Actualizado:** Uso de `BigDecimal.valueOf()` para precios

---

## üìä Resumen por Tipo de Cambio

| Ajuste | Archivos Afectados | Impacto |
|--------|-------------------|---------|
| **Blindaje Dashboard** | [RegistroService.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java), [dashboard.html](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/resources/templates/dashboard.html) | Sin excepciones si falta factura |
| **Double ‚Üí BigDecimal** | [Plan.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Plan.java), [Factura.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Factura.java), [Pago.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Pago.java), [PagoTarjeta.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/PagoTarjeta.java), [PagoPaypal.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/PagoPaypal.java), [PagoTransferencia.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/PagoTransferencia.java), [RegistroService.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java), [DataInitializer.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/config/DataInitializer.java) | Mayor precisi√≥n monetaria |
| **Comentarios Naturales** | [Usuario.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Usuario.java), [Perfil.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Perfil.java), [Suscripcion.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/entity/Suscripcion.java), [EstadoSuscripcion.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/domain/enums/EstadoSuscripcion.java), [RegistroService.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/service/RegistroService.java) | C√≥digo m√°s limpio y profesional |
| **DataInitializer** | [DataInitializer.java](file:///c:/Users/Usuario/Documents/Grado%20S%20Programaci%C3%B3n%20-%20SEGUNDO/Desarrollo%20de%20Interfaces/SPRINTBOOT/PROYECTO%20FINAL/proyecto-saas/src/main/java/com/proyectospringboot/proyectosaas/config/DataInitializer.java) | Claramente marcado como datos de prueba |

---

## üö´ Lo que NO se ha tocado

‚úÖ No se implement√≥ prorrateo  
‚úÖ No se tocaron renovaciones  
‚úÖ No se a√±adieron vistas nuevas  
‚úÖ No se refactoriz√≥ la arquitectura  
‚úÖ No se adelant√≥ nada de semanas posteriores  

---

## ‚úÖ Estado Final

- **Compilaci√≥n:** ‚úÖ Sin errores
- **Funcionalidad:** ‚úÖ Id√©ntica a la anterior
- **C√≥digo:** ‚úÖ M√°s limpio y profesional
- **Precisi√≥n monetaria:** ‚úÖ Mejorada con `BigDecimal`
- **Robustez:** ‚úÖ Dashboard blindado contra facturas faltantes

---

**Fecha:** 2026-02-05  
**Proyecto:** proyecto-saas (SEMANA 1)
